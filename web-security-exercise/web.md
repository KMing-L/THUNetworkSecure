# 应用安全攻击

> 刘铠铭 2020030014 计14

## 实验步骤

首先运行程序，可以得到如下界面：

![](网页页面.png)

### XSS 攻击

1. 在搜索框输入 `<script>alert('反射型 XSS')</script>`，进行反射型 XSS 攻击，如下图：
   
   ![](XSS指令.png)

   点击提交，运行结果：

   ![](XSS结果.png)

2. 在评论区输入 `<script>alert('持久型 XSS')</script>`，进行持久型 XSS 攻击，如下图：
   
   ![](XSS指令2.png)

   点击提交新评论，之后在每次访问数据库数据时均会弹出：

   ![](XSS结果2.png)

### SQL 注入攻击

1. 首先注册账户：
   
   ![](注册.png)

2. 正常情况下，当我们输入错误密码时无法登录：
   
   ![](正常登录失败.png)

   ![](正常登录失败反馈.png)

3. 进行 SQL 注入攻击，当我们知道希望登陆的用户名时：
   
   ![](SQL1.png)

   ![](SQL2.png)

4. 实际上，我们不需要知道数据库中有哪些用户名：
   
   ![](SQL3.png)

### CSRF 攻击模拟

背景：一个银行转账系统，只有 sudo 账户可以进入该页面对自己的账户进行信息改动。

1. 正常情况下，当我们访问 `127.0.0.1:5000/transfer` 时，可以看到无法进入转账页面，而会返回根目录。当我们点击“下一页”按钮时同理：
   
   ![](直接进入transfer.png)

2. 登录 sudo 账户，此时检查表头可以发现 header 中已经有了用户 cookie 信息：
   
   ![](cookie.png)

   此时可以正常进入 transfer 页面并进行转账操作：

   ![](转账.png)

3. 此后再点击“下一页”，会发现进入 transfer 页面并且已经向非法账户进行转账操作：
   
   ![](诱骗.png)

   ![](attack.png)